{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport { useEffect, useState } from \"react\";\nimport { Text } from \"../components/Themed\";\nimport firestore from \"@react-native-firebase/firestore\";\nimport storage from \"@react-native-firebase/storage\";\nimport { Table, TableWrapper, Rows, Col } from \"react-native-table-component\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ResultScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      getResult = _useState2[0],\n      setResult = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      geturl = _useState4[0],\n      seturl = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      image_url_true = _useState6[0],\n      checkimageurl = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      refreshing = _useState8[0],\n      setRefreshing = _useState8[1];\n\n  var geturllink = function _callee(path) {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(storage().ref(path).getDownloadURL().then(function (url) {\n              seturl(url);\n              checkimageurl(true);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getRestaurants = function _callee2(name) {\n    var data;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(firestore().collection(\"Products\").where(\"name\", \"==\", name).get().then(function (querySnapshot) {\n              querySnapshot.forEach(function (snapshot) {\n                geturllink(snapshot.data().imagePath);\n                data = _objectSpread({\n                  id: snapshot.id\n                }, snapshot.data());\n                setResult(data);\n              });\n            }));\n\n          case 2:\n            setRefreshing(false);\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    var unsubscribe = navigation.addListener(\"focus\", function () {\n      getRestaurants(\"albeni\");\n    });\n  }, [navigation]);\n  var state = {\n    tableTitle: [\"Name\", \"Price\", \"Quantity\"],\n    tableData: [[getResult.name], [getResult.price], [getResult.quantity]]\n  };\n\n  var onRefresh = function onRefresh() {\n    setRefreshing(true);\n    getRestaurants(\"albeni\");\n  };\n\n  return _jsxs(ScrollView, {\n    refreshControl: _jsx(RefreshControl, {\n      refreshing: refreshing,\n      onRefresh: onRefresh\n    }),\n    style: styles.container,\n    children: [image_url_true && _jsx(Image, {\n      source: {\n        uri: geturl\n      },\n      style: {\n        width: 350,\n        height: 175,\n        marginBottom: 5\n      }\n    }), _jsx(Table, {\n      borderStyle: {\n        borderWidth: 2\n      },\n      children: _jsxs(TableWrapper, {\n        style: styles.wrapper,\n        children: [_jsx(Col, {\n          data: state.tableTitle,\n          style: styles.title,\n          heightArr: [28, 28],\n          textStyle: {\n            textAlign: \"center\",\n            fontWeight: \"bold\",\n            fontSize: 17\n          }\n        }), _jsx(Rows, {\n          data: state.tableData,\n          flexArr: [2],\n          style: styles.row,\n          textStyle: {\n            textAlign: \"center\",\n            color: \"green\",\n            fontWeight: \"bold\",\n            fontSize: 18\n          }\n        })]\n      })\n    }), _jsx(Text, {\n      style: styles.aboutTitle,\n      children: \"About :\"\n    }), _jsx(Text, {\n      style: styles.aboutBody,\n      children: getResult.about\n    }), _jsx(Button, {\n      title: \"ok\",\n      onPress: function _callee3() {\n        return _regeneratorRuntime.async(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                geturllink(getResult.imagePath);\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 16,\n    paddingTop: 30\n  },\n  wrapper: {\n    flexDirection: \"row\",\n    backgroundColor: \"#f6f8fa\",\n    color: \"green\"\n  },\n  title: {\n    backgroundColor: \"#f6f8fa\",\n    fontWeight: \"bold\"\n  },\n  row: {\n    height: 28\n  },\n  text: {\n    textAlign: \"center\"\n  },\n  aboutTitle: {\n    color: \"red\",\n    fontSize: 20,\n    borderBottomColor: \"gray\",\n    borderBottomWidth: 3,\n    marginTop: 20,\n    fontWeight: \"bold\"\n  },\n  aboutBody: {\n    marginTop: 5\n  }\n});","map":{"version":3,"names":["useEffect","useState","Text","firestore","storage","Table","TableWrapper","Rows","Col","ResultScreen","navigation","getResult","setResult","geturl","seturl","image_url_true","checkimageurl","refreshing","setRefreshing","geturllink","path","ref","getDownloadURL","then","url","getRestaurants","name","collection","where","get","querySnapshot","forEach","snapshot","data","imagePath","id","unsubscribe","addListener","state","tableTitle","tableData","price","quantity","onRefresh","styles","container","uri","width","height","marginBottom","borderWidth","wrapper","title","textAlign","fontWeight","fontSize","row","color","aboutTitle","aboutBody","about","StyleSheet","create","flex","padding","paddingTop","flexDirection","backgroundColor","text","borderBottomColor","borderBottomWidth","marginTop"],"sources":["C:/Users/alija/Documents/react-native/Supermarket/screens/ResultScreen.tsx"],"sourcesContent":["import { StatusBar } from \"expo-status-bar\";\nimport {\n  Platform,\n  StyleSheet,\n  Image,\n  Button,\n  ScrollView,\n  RefreshControl,\n} from \"react-native\";\nimport { useEffect, useState } from \"react\";\n\nimport { Text, View } from \"../components/Themed\";\nimport firestore from \"@react-native-firebase/firestore\";\nimport storage from \"@react-native-firebase/storage\";\n\nimport {\n  Table,\n  TableWrapper,\n  Row,\n  Rows,\n  Col,\n} from \"react-native-table-component\";\n\nexport default function ResultScreen({ navigation }) {\n  const [getResult, setResult] = useState({});\n  const [geturl, seturl] = useState(\"\");\n  const [image_url_true, checkimageurl] = useState(false);\n  const [refreshing, setRefreshing] = useState(true);\n\n  const geturllink = async (path) => {\n    await storage()\n      .ref(path)\n      .getDownloadURL()\n      .then((url) => {\n        seturl(url);\n        checkimageurl(true);\n      });\n  };\n  const getRestaurants = async (name) => {\n    let data;\n    await firestore()\n      .collection(\"Products\")\n      .where(\"name\", \"==\", name)\n      .get()\n      .then((querySnapshot) => {\n        querySnapshot.forEach((snapshot) => {\n          geturllink(snapshot.data().imagePath);\n          data = {\n            id: snapshot.id,\n            ...snapshot.data(),\n          };\n          setResult(data);\n        });\n      });\n    setRefreshing(false);\n  };\n\n  useEffect(() => {\n    const unsubscribe = navigation.addListener(\"focus\", () => {\n      // The screen is focused\n      // Call any action and update data\n      getRestaurants(\"albeni\");\n    });\n\n    // Return the function to unsubscribe from the event so it gets removed on unmount\n\n    //return unsubscribe;\n  }, [navigation]);\n\n  const state = {\n    tableTitle: [\"Name\", \"Price\", \"Quantity\"],\n    tableData: [[getResult.name], [getResult.price], [getResult.quantity]],\n  };\n\n  const onRefresh = () => {\n    setRefreshing(true);\n    getRestaurants(\"albeni\");\n  };\n\n  return (\n    <ScrollView\n      refreshControl={\n        <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\n      }\n      style={styles.container}\n    >\n      {image_url_true && (\n        <Image\n          source={{\n            uri: geturl,\n          }}\n          style={{\n            width: 350,\n            height: 175,\n            marginBottom: 5,\n          }}\n        />\n      )}\n\n      <Table borderStyle={{ borderWidth: 2 }}>\n        <TableWrapper style={styles.wrapper}>\n          <Col\n            data={state.tableTitle}\n            style={styles.title}\n            heightArr={[28, 28]}\n            textStyle={{\n              textAlign: \"center\",\n              fontWeight: \"bold\",\n              fontSize: 17,\n            }}\n          />\n          <Rows\n            data={state.tableData}\n            flexArr={[2]}\n            style={styles.row}\n            textStyle={{\n              textAlign: \"center\",\n              color: \"green\",\n              fontWeight: \"bold\",\n              fontSize: 18,\n            }}\n          />\n        </TableWrapper>\n      </Table>\n      <Text style={styles.aboutTitle}>About :</Text>\n      <Text style={styles.aboutBody}>{getResult.about}</Text>\n      <Button\n        title=\"ok\"\n        onPress={async () => {\n          geturllink(getResult.imagePath);\n        }}\n      />\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, padding: 16, paddingTop: 30 },\n  wrapper: {\n    flexDirection: \"row\",\n    backgroundColor: \"#f6f8fa\",\n    color: \"green\",\n  },\n  title: { backgroundColor: \"#f6f8fa\", fontWeight: \"bold\" },\n  row: { height: 28 },\n  text: { textAlign: \"center\" },\n  aboutTitle: {\n    color: \"red\",\n    fontSize: 20,\n    borderBottomColor: \"gray\",\n    borderBottomWidth: 3,\n    marginTop: 20,\n    fontWeight: \"bold\",\n  },\n  aboutBody: {\n    marginTop: 5,\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}